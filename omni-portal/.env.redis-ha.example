# Redis High Availability Configuration
# Copy this file to .env.redis-ha and customize for your environment

# Enable Redis HA
REDIS_HA_ENABLED=true
REDIS_CLIENT=phpredis

# Sentinel Configuration
REDIS_SENTINEL_ENABLED=true
REDIS_SENTINEL_MASTER=mymaster
REDIS_SENTINEL_HOST_1=127.0.0.1
REDIS_SENTINEL_PORT_1=26379
REDIS_SENTINEL_HOST_2=127.0.0.1
REDIS_SENTINEL_PORT_2=26380
REDIS_SENTINEL_HOST_3=127.0.0.1
REDIS_SENTINEL_PORT_3=26381
REDIS_SENTINEL_TIMEOUT=3.0
REDIS_SENTINEL_RETRY_LIMIT=3
REDIS_SENTINEL_UPDATE=true

# Redis Connection Settings
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Connection Pooling
REDIS_POOL_SIZE=10
REDIS_MAX_CONNECTIONS=50
REDIS_MIN_CONNECTIONS=5
REDIS_CONNECTION_TIMEOUT=5.0
REDIS_READ_TIMEOUT=5.0
REDIS_TCP_KEEPALIVE=1

# Database Assignments
REDIS_CACHE_DB=1
REDIS_SESSION_DB=3
REDIS_HORIZON_DB=2

# Cache Settings
REDIS_CACHE_PERSISTENT=true
REDIS_CACHE_CONNECTION_TIMEOUT=3.0
REDIS_CACHE_READ_TIMEOUT=3.0
REDIS_CACHE_TCP_KEEPALIVE=1

# Session Settings
REDIS_SESSION_PERSISTENT=true
REDIS_SESSION_CONNECTION_TIMEOUT=2.0
REDIS_SESSION_READ_TIMEOUT=2.0
REDIS_SESSION_TCP_KEEPALIVE=1

# Horizon Settings
REDIS_HORIZON_PERSISTENT=true
REDIS_HORIZON_CONNECTION_TIMEOUT=10.0
REDIS_HORIZON_READ_TIMEOUT=10.0
REDIS_HORIZON_TCP_KEEPALIVE=1

# Failover Settings
REDIS_FAILOVER_MAX_RETRIES=3
REDIS_FAILOVER_RETRY_DELAY=100
REDIS_HEALTH_CHECK_INTERVAL=10
REDIS_FAILURE_THRESHOLD=3

# Monitoring
REDIS_MONITORING_ENABLED=true
REDIS_LOG_LEVEL=warning

# Backup
REDIS_BACKUP_ENABLED=false
REDIS_BACKUP_INTERVAL=3600
REDIS_BACKUP_RETENTION=168
REDIS_BACKUP_PATH=storage/redis-backups

# Performance Tuning
REDIS_COMPRESSION=lz4
REDIS_SERIALIZATION=igbinary
REDIS_POOL_TIMEOUT=30
REDIS_MAX_IDLE_TIME=300

# Security
REDIS_PREFIX=omni_portal_

# Docker Compose Settings for HA
COMPOSE_PROJECT_NAME=omni-portal-redis-ha
COMPOSE_FILE=docker-compose.redis-ha.yml